<?php
$c=&$this->config;
$c['manager_theme'] = "MODxRE";
$c['settings_version'] = "1.0.13";
$c['show_meta'] = "0";
$c['server_offset_time'] = "0";
$c['server_protocol'] = "http";
$c['manager_language'] = "russian-UTF8";
$c['modx_charset'] = "UTF-8";
$c['site_name'] = "Vars";
$c['site_start'] = "2";
$c['error_page'] = "2";
$c['unauthorized_page'] = "2";
$c['site_status'] = "1";
$c['site_unavailable_message'] = "The site is currently unavailable";
$c['track_visitors'] = "0";
$c['top_howmany'] = "10";
$c['auto_template_logic'] = "parent";
$c['default_template'] = "3";
$c['old_template'] = "3";
$c['publish_default'] = "1";
$c['cache_default'] = "1";
$c['search_default'] = "1";
$c['friendly_urls'] = "1";
$c['friendly_url_prefix'] = "";
$c['friendly_url_suffix'] = ".html";
$c['friendly_alias_urls'] = "1";
$c['use_alias_path'] = "1";
$c['use_udperms'] = "1";
$c['udperms_allowroot'] = "0";
$c['failed_login_attempts'] = "3";
$c['blocked_minutes'] = "60";
$c['use_captcha'] = "0";
$c['captcha_words'] = "MODX,Access,Better,BitCode,Cache,Desc,Design,Excell,Enjoy,URLs,TechView,Gerald,Griff,Humphrey,Holiday,Intel,Integration,Joystick,Join(),Tattoo,Genetic,Light,Likeness,Marit,Maaike,Niche,Netherlands,Ordinance,Oscillo,Parser,Phusion,Query,Question,Regalia,Righteous,Snippet,Sentinel,Template,Thespian,Unity,Enterprise,Verily,Veri,Website,WideWeb,Yap,Yellow,Zebra,Zygote";
$c['emailsender'] = "sales@vars.by";
$c['email_method'] = "smtp";
$c['smtp_auth'] = "0";
$c['smtp_host'] = "";
$c['smtp_port'] = "25";
$c['smtp_username'] = "";
$c['emailsubject'] = "Your login details";
$c['number_of_logs'] = "100";
$c['number_of_messages'] = "30";
$c['number_of_results'] = "20";
$c['use_editor'] = "1";
$c['use_browser'] = "1";
$c['rb_base_dir'] = "/home/varsby/public_html/assets/";
$c['rb_base_url'] = "assets/";
$c['which_editor'] = "TinyMCE";
$c['fe_editor_lang'] = "russian-UTF8";
$c['fck_editor_toolbar'] = "standard";
$c['fck_editor_autolang'] = "0";
$c['editor_css_path'] = "";
$c['editor_css_selectors'] = "";
$c['strip_image_paths'] = "1";
$c['upload_images'] = "bmp,ico,gif,jpeg,jpg,png,psd,tif,tiff";
$c['upload_media'] = "au,avi,mp3,mp4,mpeg,mpg,wav,wmv";
$c['upload_flash'] = "fla,flv,swf";
$c['upload_files'] = "aac,au,avi,css,cache,doc,docx,gz,gzip,htaccess,htm,html,js,mp3,mp4,mpeg,mpg,ods,odp,odt,pdf,ppt,pptx,rar,tar,tgz,txt,wav,wmv,xls,xlsx,xml,z,zip";
$c['upload_maxsize'] = "1048576";
$c['new_file_permissions'] = "0644";
$c['new_folder_permissions'] = "0755";
$c['filemanager_path'] = "/home/varsby/public_html/";
$c['theme_refresher'] = "";
$c['manager_layout'] = "4";
$c['custom_contenttype'] = "application/rss+xml,application/pdf,application/vnd.ms-word,application/vnd.ms-excel,text/html,text/css,text/xml,text/javascript,text/plain,application/json";
$c['auto_menuindex'] = "1";
$c['session.cookie.lifetime'] = "604800";
$c['mail_check_timeperiod'] = "60";
$c['manager_direction'] = "ltr";
$c['tinymce_editor_theme'] = "full";
$c['tinymce_custom_plugins'] = "style,advimage,advlink,searchreplace,print,contextmenu,paste,fullscreen,nonbreaking,xhtmlxtras,visualchars,media";
$c['tinymce_custom_buttons1'] = "undo,redo,selectall,separator,pastetext,pasteword,separator,search,replace,separator,nonbreaking,hr,charmap,separator,image,link,unlink,anchor,media,separator,cleanup,removeformat,separator,fullscreen,print,code,help";
$c['tinymce_custom_buttons2'] = "bold,italic,underline,strikethrough,sub,sup,separator,bullist,numlist,outdent,indent,separator,justifyleft,justifycenter,justifyright,justifyfull,separator,styleselect,formatselect,separator,styleprops";
$c['tree_show_protected'] = "0";
$c['rss_url_news'] = "http://feeds.feedburner.com/modx-announce";
$c['rss_url_security'] = "http://feeds.feedburner.com/modxsecurity";
$c['validate_referer'] = "1";
$c['datepicker_offset'] = "-10";
$c['xhtml_urls'] = "1";
$c['allow_duplicate_alias'] = "0";
$c['automatic_alias'] = "1";
$c['datetime_format'] = "dd-mm-YYYY";
$c['warning_visibility'] = "1";
$c['remember_last_tab'] = "0";
$c['enable_bindings'] = "1";
$c['seostrict'] = "0";
$c['cache_type'] = "1";
$c['maxImageWidth'] = "1600";
$c['maxImageHeight'] = "1200";
$c['thumbWidth'] = "150";
$c['thumbHeight'] = "150";
$c['thumbsDir'] = ".thumbs";
$c['jpegQuality'] = "90";
$c['denyZipDownload'] = "0";
$c['denyExtensionRename'] = "0";
$c['showHiddenFiles'] = "0";
$c['docid_incrmnt_method'] = "0";
$c['make_folders'] = "0";
$c['site_id'] = "531e0e38f26c0";
$c['site_unavailable_page'] = "";
$c['reload_site_unavailable'] = "";
$c['siteunavailable_message_default'] = "В настоящее время сайт недоступен.";
$c['check_files_onlogin'] = "index.php\r\n.htaccess\r\nmanager/index.php\r\nmanager/includes/config.inc.php";
$c['error_reporting'] = "1";
$c['send_errormail'] = "3";
$c['pwd_hash_algo'] = "UNCRYPT";
$c['reload_captcha_words'] = "";
$c['captcha_words_default'] = "MODX,Access,Better,BitCode,Chunk,Cache,Desc,Design,Excell,Enjoy,URLs,TechView,Gerald,Griff,Humphrey,Holiday,Intel,Integration,Joystick,Join(),Oscope,Genetic,Light,Likeness,Marit,Maaike,Niche,Netherlands,Ordinance,Oscillo,Parser,Phusion,Query,Question,Regalia,Righteous,Snippet,Sentinel,Template,Thespian,Unity,Enterprise,Verily,Tattoo,Veri,Website,WideWeb,Yap,Yellow,Zebra,Zygote";
$c['reload_emailsubject'] = "";
$c['emailsubject_default'] = "Данные для авторизации";
$c['reload_signupemail_message'] = "";
$c['signupemail_message'] = "Здравствуйте, [+uid+]!\r\n\r\nВаши данные для авторизации в системе управления сайтом [+sname+]:\r\n\r\nИмя пользователя: [+uid+]\r\nПароль: [+pwd+]\r\n\r\nПосле успешной авторизации в системе управления сайтом ([+surl+]), вы сможете изменить свой пароль.\r\n\r\nС уважением, Администрация";
$c['system_email_signup_default'] = "Здравствуйте, [+uid+]!\r\n\r\nВаши данные для авторизации в системе управления сайтом [+sname+]:\r\n\r\nИмя пользователя: [+uid+]\r\nПароль: [+pwd+]\r\n\r\nПосле успешной авторизации в системе управления сайтом ([+surl+]), вы сможете изменить свой пароль.\r\n\r\nС уважением, Администрация";
$c['reload_websignupemail_message'] = "";
$c['websignupemail_message'] = "Здравствуйте, [+uid+]!\r\n\r\nВаши данные для авторизации на [+sname+]:\r\n\r\nИмя пользователя: [+uid+]\r\nПароль: [+pwd+]\r\n\r\nПосле успешной авторизации на [+sname+] ([+surl+]), вы сможете изменить свой пароль.\r\n\r\nС уважением, Администрация";
$c['system_email_websignup_default'] = "Здравствуйте, [+uid+]!\r\n\r\nВаши данные для авторизации на [+sname+]:\r\n\r\nИмя пользователя: [+uid+]\r\nПароль: [+pwd+]\r\n\r\nПосле успешной авторизации на [+sname+] ([+surl+]), вы сможете изменить свой пароль.\r\n\r\nС уважением, Администрация";
$c['reload_system_email_webreminder_message'] = "";
$c['webpwdreminder_message'] = "Здравствуйте, [+uid+]!\r\n\r\nЧтобы активировать ваш новый пароль, перейдите по следующей ссылке:\r\n\r\n[+surl+]\r\n\r\nПозже вы сможете использовать следующий пароль для авторизации: [+pwd+]\r\n\r\nЕсли это письмо пришло к вам по ошибке, пожалуйста, проигнорируйте его.\r\n\r\nС уважением, Администрация";
$c['system_email_webreminder_default'] = "Здравствуйте, [+uid+]!\r\n\r\nЧтобы активировать ваш новый пароль, перейдите по следующей ссылке:\r\n\r\n[+surl+]\r\n\r\nПозже вы сможете использовать следующий пароль для авторизации: [+pwd+]\r\n\r\nЕсли это письмо пришло к вам по ошибке, пожалуйста, проигнорируйте его.\r\n\r\nС уважением, Администрация";
$c['tree_page_click'] = "27";
$c['resource_tree_node_name'] = "pagetitle";
$c['rb_webuser'] = "0";
$c['clean_uploaded_filename'] = "0";
$c['mce_editor_skin'] = "default";
$c['mce_template_docs'] = "";
$c['mce_template_chunks'] = "";
$c['mce_entermode'] = "p";
$c['mce_element_format'] = "xhtml";
$c['mce_schema'] = "html4";
$c['tinymce_custom_buttons3'] = "";
$c['tinymce_custom_buttons4'] = "";
$c['tinymce_css_selectors'] = "left=justifyleft;right=justifyright";
$c['sys_files_checksum'] = "a:4:{s:34:\"/home/varsby/public_html/index.php\";s:32:\"c6f73908b7b0a58acfe95b0f844d134e\";s:34:\"/home/varsby/public_html/.htaccess\";s:32:\"61a3be34923238e6cfe23b963fb82015\";s:42:\"/home/varsby/public_html/manager/index.php\";s:32:\"7e783d712f4d3beff85b7bdfadd33cd5\";s:56:\"/home/varsby/public_html/manager/includes/config.inc.php\";s:32:\"c4cb82c65a06930a74d9648e885fc201\";}";
$c['company_phone'] = "";
$c['company_address'] = "";
$c['hr_manager'] = "";
$this->aliasListing = array();
$a = &$this->aliasListing;
$d = &$this->documentListing;
$m = &$this->documentMap;
$d['index'] = 44;
$a[44] = array('id' => 44, 'alias' => 'index', 'path' => '', 'parent' => 0, 'isfolder' => 0);
$m[] = array('0' => '44');
$d['main'] = 2;
$a[2] = array('id' => 2, 'alias' => 'main', 'path' => '', 'parent' => 0, 'isfolder' => 1);
$m[] = array('0' => '2');
$d['produksty'] = 21;
$a[21] = array('id' => 21, 'alias' => 'produksty', 'path' => '', 'parent' => 0, 'isfolder' => 1);
$m[] = array('0' => '21');
$d['partneram'] = 5;
$a[5] = array('id' => 5, 'alias' => 'partneram', 'path' => '', 'parent' => 2, 'isfolder' => 0);
$m[] = array('2' => '5');
$d['katalog'] = 3;
$a[3] = array('id' => 3, 'alias' => 'katalog', 'path' => '', 'parent' => 2, 'isfolder' => 1);
$m[] = array('2' => '3');
$d['kontakty'] = 6;
$a[6] = array('id' => 6, 'alias' => 'kontakty', 'path' => '', 'parent' => 2, 'isfolder' => 0);
$m[] = array('2' => '6');
$d['o-kompanii'] = 4;
$a[4] = array('id' => 4, 'alias' => 'o-kompanii', 'path' => '', 'parent' => 2, 'isfolder' => 0);
$m[] = array('2' => '4');
$d['vakansii'] = 7;
$a[7] = array('id' => 7, 'alias' => 'vakansii', 'path' => '', 'parent' => 2, 'isfolder' => 1);
$m[] = array('2' => '7');
$d['katalog/katalog-3'] = 11;
$a[11] = array('id' => 11, 'alias' => 'katalog-3', 'path' => 'katalog', 'parent' => 3, 'isfolder' => 0);
$m[] = array('3' => '11');
$d['katalog/vesna-leto-2014cxs'] = 10;
$a[10] = array('id' => 10, 'alias' => 'vesna-leto-2014cxs', 'path' => 'katalog', 'parent' => 3, 'isfolder' => 1);
$m[] = array('3' => '10');
$d['katalog/new'] = 9;
$a[9] = array('id' => 9, 'alias' => 'new', 'path' => 'katalog', 'parent' => 3, 'isfolder' => 1);
$m[] = array('3' => '9');
$d['katalog/vesna-leto-2014'] = 23;
$a[23] = array('id' => 23, 'alias' => 'vesna-leto-2014', 'path' => 'katalog', 'parent' => 3, 'isfolder' => 1);
$m[] = array('3' => '23');
$d['katalog/sale'] = 22;
$a[22] = array('id' => 22, 'alias' => 'sale', 'path' => 'katalog', 'parent' => 3, 'isfolder' => 0);
$m[] = array('3' => '22');
$d['katalog/all'] = 8;
$a[8] = array('id' => 8, 'alias' => 'all', 'path' => 'katalog', 'parent' => 3, 'isfolder' => 1);
$m[] = array('3' => '8');
$d['vakansii/vakansiya-1'] = 19;
$a[19] = array('id' => 19, 'alias' => 'vakansiya-1', 'path' => 'vakansii', 'parent' => 7, 'isfolder' => 0);
$m[] = array('7' => '19');
$d['vakansii/vakansiya-2'] = 20;
$a[20] = array('id' => 20, 'alias' => 'vakansiya-2', 'path' => 'vakansii', 'parent' => 7, 'isfolder' => 0);
$m[] = array('7' => '20');
$d['produksty/relef-karman'] = 24;
$a[24] = array('id' => 24, 'alias' => 'relef-karman', 'path' => 'produksty', 'parent' => 21, 'isfolder' => 0);
$m[] = array('21' => '24');
$d['produksty/koleno-shp'] = 25;
$a[25] = array('id' => 25, 'alias' => 'koleno-shp', 'path' => 'produksty', 'parent' => 21, 'isfolder' => 0);
$m[] = array('21' => '25');
$d['produksty/relef'] = 26;
$a[26] = array('id' => 26, 'alias' => 'relef', 'path' => 'produksty', 'parent' => 21, 'isfolder' => 0);
$m[] = array('21' => '26');
$d['produksty/karmen'] = 27;
$a[27] = array('id' => 27, 'alias' => 'karmen', 'path' => 'produksty', 'parent' => 21, 'isfolder' => 0);
$m[] = array('21' => '27');
$d['produksty/truba'] = 28;
$a[28] = array('id' => 28, 'alias' => 'truba', 'path' => 'produksty', 'parent' => 21, 'isfolder' => 0);
$m[] = array('21' => '28');
$d['produksty/relef-molniya'] = 29;
$a[29] = array('id' => 29, 'alias' => 'relef-molniya', 'path' => 'produksty', 'parent' => 21, 'isfolder' => 0);
$m[] = array('21' => '29');
$d['produksty/laro'] = 30;
$a[30] = array('id' => 30, 'alias' => 'laro', 'path' => 'produksty', 'parent' => 21, 'isfolder' => 0);
$m[] = array('21' => '30');
$d['produksty/dzhins'] = 31;
$a[31] = array('id' => 31, 'alias' => 'dzhins', 'path' => 'produksty', 'parent' => 21, 'isfolder' => 0);
$m[] = array('21' => '31');
$d['produksty/koleno-n'] = 32;
$a[32] = array('id' => 32, 'alias' => 'koleno-n', 'path' => 'produksty', 'parent' => 21, 'isfolder' => 0);
$m[] = array('21' => '32');
$d['produksty/sem-vosmyh'] = 33;
$a[33] = array('id' => 33, 'alias' => 'sem-vosmyh', 'path' => 'produksty', 'parent' => 21, 'isfolder' => 0);
$m[] = array('21' => '33');
$d['produksty/koketka'] = 34;
$a[34] = array('id' => 34, 'alias' => 'koketka', 'path' => 'produksty', 'parent' => 21, 'isfolder' => 0);
$m[] = array('21' => '34');
$d['produksty/lada'] = 35;
$a[35] = array('id' => 35, 'alias' => 'lada', 'path' => 'produksty', 'parent' => 21, 'isfolder' => 0);
$m[] = array('21' => '35');
$d['produksty/mila'] = 36;
$a[36] = array('id' => 36, 'alias' => 'mila', 'path' => 'produksty', 'parent' => 21, 'isfolder' => 0);
$m[] = array('21' => '36');
$d['produksty/moskva'] = 37;
$a[37] = array('id' => 37, 'alias' => 'moskva', 'path' => 'produksty', 'parent' => 21, 'isfolder' => 0);
$m[] = array('21' => '37');
$d['produksty/nikol'] = 38;
$a[38] = array('id' => 38, 'alias' => 'nikol', 'path' => 'produksty', 'parent' => 21, 'isfolder' => 0);
$m[] = array('21' => '38');
$d['produksty/relef1'] = 40;
$a[40] = array('id' => 40, 'alias' => 'relef1', 'path' => 'produksty', 'parent' => 21, 'isfolder' => 0);
$m[] = array('21' => '40');
$d['produksty/siluet'] = 41;
$a[41] = array('id' => 41, 'alias' => 'siluet', 'path' => 'produksty', 'parent' => 21, 'isfolder' => 0);
$m[] = array('21' => '41');
$d['produksty/solo'] = 42;
$a[42] = array('id' => 42, 'alias' => 'solo', 'path' => 'produksty', 'parent' => 21, 'isfolder' => 0);
$m[] = array('21' => '42');
$d['produksty/shlica'] = 43;
$a[43] = array('id' => 43, 'alias' => 'shlica', 'path' => 'produksty', 'parent' => 21, 'isfolder' => 0);
$m[] = array('21' => '43');
$c = &$this->contentTypes;
$c = &$this->chunkCache;
$c['mm_rules'] = '// more example rules are in assets/plugins/managermanager/example_mm_rules.inc.php
// example of how PHP is allowed - check that a TV named documentTags exists before creating rule

if ($modx->db->getValue($modx->db->select(\'count(id)\', $modx->getFullTableName(\'site_tmplvars\'), "name=\'documentTags\'"))) {
	mm_widget_tags(\'documentTags\', \' \'); // Give blog tag editing capabilities to the \'documentTags (3)\' TV
	mm_widget_colors(\'color\');

	mm_createTab(\'Атрибуты товара\', \'productOptions\', \'\', \'8\');
	mm_moveFieldsToTab(\'price,price2,manufacturer,сountry,code,color,style,season,size,details,composition,typePockets,numberPockets,cloth\', \'productOptions\'); 
	mm_createTab(\'Изображения товара\', \'productImages\', \'\', \'8\');
	mm_moveFieldsToTab(\'mainProductImage,images\', \'productImages\'); 
}
mm_widget_showimagetvs(); // Always give a preview of Image TVs
';
$c['WebLoginSideBar'] = '<!-- #declare:separator <hr> -->
<!-- login form section-->
<form method="post" name="loginfrm" action="[+action+]">
    <input type="hidden" value="[+rememberme+]" name="rememberme" />
    <fieldset>
        <h3>Your Login Details</h3>
        <label for="username">User: <input type="text" name="username" id="username" tabindex="1" onkeypress="return webLoginEnter(document.loginfrm.password);" value="[+username+]" /></label>
    	<label for="password">Password: <input type="password" name="password" id="password" tabindex="2" onkeypress="return webLoginEnter(document.loginfrm.cmdweblogin);" value="" /></label>
    	<input type="checkbox" id="checkbox_1" name="checkbox_1" tabindex="3" size="1" value="" [+checkbox+] onclick="webLoginCheckRemember()" /><label for="checkbox_1" class="checkbox">Remember me</label>
    	<input type="submit" value="[+logintext+]" name="cmdweblogin" class="button" />
	<a href="#" onclick="webLoginShowForm(2);return false;" id="forgotpsswd">Forget Your Password?</a>
	</fieldset>
</form>
<hr>
<!-- log out hyperlink section -->
<h4>You\'re already logged in</h4>
Do you wish to <a href="[+action+]" class="button">[+logouttext+]</a>?
<hr>
<!-- Password reminder form section -->
<form name="loginreminder" method="post" action="[+action+]">
    <fieldset>
        <h3>It happens to everyone...</h3>
        <input type="hidden" name="txtpwdrem" value="0" />
        <label for="txtwebemail">Enter the email address of your account to reset your password: <input type="text" name="txtwebemail" id="txtwebemail" size="24" /></label>
        <label>To return to the login form, press the cancel button.</label>
    	<input type="submit" value="Submit" name="cmdweblogin" class="button" /> <input type="reset" value="Cancel" name="cmdcancel" onclick="webLoginShowForm(1);" class="button" style="clear:none;display:inline" />
    </fieldset>
</form>

';
$c['HEAD'] = '<!DOCTYPE html>
<html lang="ru">
	<head>
		<meta name="google-site-verification" content="HQaBIsJ3tGmzNCCYZqkXMl77QsLJX4rm4TuA46k8sQ4" />
		<meta http-equiv="Content-Type" content="text/html; charset=[(modx_charset)]" />
		<title>[(site_name)] | [*longtitle*]</title>
		<base href="[(site_url)]" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
		<meta name="keywords" content="[*keywords*]" />
		<meta name="description" content="[*description*]" />
		<!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
		<link href=\'http://fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,400italic,500,500italic,700,700italic,900,900italic&subset=latin,cyrillic-ext\' rel=\'stylesheet\' type=\'text/css\'>
		<link href="/assets/templates/vitrina/css/bootstrap.min.css" rel="stylesheet"/>
		<link href="/assets/templates/vitrina/css/bootstrap-responsive.min.css" rel="stylesheet"/>
		<link href="/assets/templates/vitrina/css/main.css" rel="stylesheet"/>
		
		
		<!--[if lt IE 9]><script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	</head>';
$c['scripts'] = '<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write(\'<script src="/assets/templates/vitrina/js/jquery.min.js"><\\/script>\')</script>
<script src="/assets/templates/vitrina/js/bootstrap.min.js"></script>
<script src="/assets/templates/vitrina/js/main.js"></script>';
$c['HEADER'] = '<div class="navbar navbar-inverse navbar-fixed-top">
	
      <div class="navbar-inner">
        <div class="container">
			<a class="brand" href="[(site_url)]" title="[(site_name)]"><img src="assets/templates/vitrina/img/logo.png" alt="[(site_name)]"/></a>
          <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
          </button>
          <div class="nav-collapse collapse">
			  [!Wayfinder? &startId=`2` &outerClass=`nav` &level=`1`!] 
            
            
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>';
$c['catalogListAtMainPage'] = '

<div class="row-fluid catalog-list second">
	[!Ditto &tpl=`catalogItemTpl` &documents=`23, 22` &limit=`3` &tplFirst=`catalogItemBigTpl`!]
</div>
<div class="row-fluid catalog-list">
	[!Ditto &tpl=`catalogItemTpl` &documents=`4, 5, 9` &limit=`3` &limit=`3`!]
</div>';
$c['thank-tpl'] = '<p>Спасибо за интерес к нашей компании, мы свяжемся с вами в ближайшее время</p>';
$c['form-tpl'] = '<div id="contact_form">
	
	[+validationmessage+]       
	<form method="post" action="[~[*id*]~]"  class="form-horizontal">
		
		<input type="hidden" name="formid" value="Send" />
		
		<div>
			<input type="text" id="inputName" placeholder="Имя" name="author" class="required input_field" eform="Имя::1">
		</div>
		
		<div>
			<input type="text" id="inputEmail" placeholder="Email" name="email" class="validate-email required input_field" eform="Адрес электронной почты:email:1">
		</div>
		
		<div>
			<textarea id="inputText" placeholder="Сообщение"  name="text" rows="0" cols="0" class="required" eform="Текст сообщения:html:1"></textarea>
		</div>
		
		
		<div>
			
			<img src="[+verimageurl+]" alt="Код проверки" border="0"/>
			<input type="text" placeholder="Введите код" class="vericodeform" name="vericode" />
		</div>
		
		
		<button type="submit">Отправить</button>
		
	</form>
	
</div>';
$c['catalogItemTpl'] = '<div class="span4 catalog-item">
	[+iconCategory+]
	<div class="category-info">
		<h2>[+pagetitle+]</h2>
		<a href="[~[+id+]~]">Далее</a>
	</div>
	
</div>';
$c['FOOTER'] = '<footer>
	<div class="container">
		<div class="row">
			<div class="span6">
				<h2><span>свяжитесь с</span> нами</h2>
				<div class="info-block">
					<div class="info">
						<p class="footer-contacts-with-pading">
							Телефон: +375 29 5880419<br/>
							E-mail: <a href="mailto:sales@vars.by">sales@vars.by</a><br/> 
						
					Skype: vars.sales</p>
						<p>
							ул.Горького, <br/>
							91, Гродно,<br/>
							Беларусь
							
						</p>
						<p>
							<!-- fax<br/>
							+49 [0] 571 911.93.99<br/>
							web<br/>
							<a href="www.p2media.de" target="_blank">www.p2media.de</a> -->
						</p>
						
					</div>
					<div class="map">
						<script type="text/javascript" charset="utf-8" src="//api-maps.yandex.ru/services/constructor/1.0/js/?sid=DsUFSm2HviSWMBBClr-p9t5pD_AwAgKh&width=600&height=450"></script>	
					</div>
				</div>
				<br>
				<!-- ссылки на группы в соц.сети-->
				<div class="socialbutton">
<h2><span>МЫ В СОЦИАЛЬ</span>НЫХ СЕТЯХ</h2>
<ul>
<li><a href="http://vk.com/varsby" title="Мы в Вконтакте!" target="_blank"><img id="vk" src="http://bombardir.butsa.ru/wp-content/uploads/2012/07/vkontaktev-300x300.png"/></a></li>
<li><a href="https://www.facebook.com/varsby" title="Мы на Facebook!" target="_blank"><img id="facebook" src="http://marketingbloga.ru/wp-content/uploads/2011/05/facebook-logo-e1306520140106.png"/></a></li>
<li><a href="https://plus.google.com/u/1/communities/104532567120531151743" title="Мы на Google+!" target="_blank"><img id="gplus" src="http://s1.iconbird.com/ico/0912/MetroUIDock/w512h5121347464853Googlealt.png"/></a></li>
</ul>
</div>
			<br><br>
				<div class="linkicon"> <!-- Иконки ссылки на каталоги и т.д.-->
					<!-- catalog.tut.by code begin -->
<a href="http://catalog.tut.by/">
<img src="http://catalog.tut.by/images/catalog-tut2.gif" style="border:0px none;width:88px;height:31px;" alt="Каталог TUT.BY" /></a>
					<!-- catalog.tut.by code end --></div>	
			</div>
			
				
			<div class="span6">
				<h2><span>Контактная</span> форма </h2> 
				[!eForm? &formid=`Send` &tpl=`form-tpl` &to=`sales@vars.by` &report=`report-tpl` &thankyou=`thank-tpl` &vericode=`1` &subject=`Сообщение с моего сайта`!]
				
			</div>
		</div>
	</div>
</footer>';
$c['gallery'] = '<div class="gallery-wrapper container">	
	<div class="container">
		<div id="carousel-example-generic" class="carousel slide" data-ride="carousel">
			<!-- Индикаторы -->
			
			[!multiTV? 
			&tvName=`gallery`
			&docid=`[*id*]`
			&tplConfig=``
			&outerTpl=`outerGalleryTpl`
			&rowTpl=`rowGalleryTpl`
			&display=`all`
			&rows=`all`
			&toPlaceholder=``
			&randomize=`0`
			&orderBy=``
			&published=`1`
			&emptyOutput=`1`
			&emptyOutput=`1`
			&outputSeparator=``
			!]
			
			
			<!-- Контролы -->
			<a class="left carousel-control" href="#carousel-example-generic" data-slide="prev">
				<span class="glyphicon glyphicon-chevron-left"></span>
			</a>
			<a class="right carousel-control" href="#carousel-example-generic" data-slide="next">
				<span class="glyphicon glyphicon-chevron-right"></span>
			</a>
		</div>
	</div>
</div>
<!-- Main hero unit for a primary marketing message or call to action -->';
$c['outerGalleryTpl'] = '<div class="carousel-inner">
[+wrapper+]	
</div>

<ol class="carousel-indicators">
	[[getSliderNavigationItem? &countElements=`[+rows.total+]`]]
</ol>';
$c['rowGalleryTpl'] = '<div class="item[[if &is=`[+row.number+]:is:1` &then=` active`]]">
	
	<img class="visible-decs" src="[[phpthumb? &input=`[+image+]` &options=`w=1153,h=599,far=C,bg=FFFFFF`]]" alt="[+title+]">
	<img class="visible-pad-land" src="[[phpthumb? &input=`[+imagePadLand+]` &options=`w=1050,h=599,far=C,bg=FFFFFF`]]" alt="[+title+]">
	<img class="visible-pad-port" src="[[phpthumb? &input=`[+imagePadPort+]` &options=`w=777,h=599,far=C,bg=FFFFFF`]]" alt="[+title+]">
	<img class="visible-mobile-land" src="[[phpthumb? &input=`[+imageMobileLand+]` &options=`w=575,h=599,far=C,bg=FFFFFF`]]" alt="[+title+]">
	<img class="visible-mobile-port" src="[[phpthumb? &input=`[+imageMobilePort+]` &options=`w=309,h=599,far=C,bg=FFFFFF`]]" alt="[+title+]">
	<div class="hero-unit">
		
		<h2>[+title+]</h2>
		<h3>[+subtitle+]</h3>
		<p class="text">[+text+]</p>
		<p><a href="[+link+]" class="learn-more">далее</a></p>
	</div>
</div>';
$c['report-tpl'] = '<p>Это сообщение было отправлено посетителем по имени [+author+] с помощью формы обратной связи. </p>
<table>
<tr valign="top"><td><b>Имя:</b></td><td>[+author+]</td></tr>
<tr valign="top"><td><b>Email:</b>:</td><td>[+email+]</td></tr>
<tr valign="top"><td><b>Сообщение:</b></td><td>[+text+]</td></tr>
</table>
<p>Вы можете использовать эту ссылку для ответа: <a href="mailto:[+email+]">[+email+]</a></p>';
$c['productList'] = '<div class="product-list row-fluid">
	<div class="span2 catalog-list">
		<h1>[*pagetitle*]</h1>
		[!Wayfinder? &startId=`3` !]
	</div>
	<div class="span10 product-list">
		<div class="header">
			<div class="pagination">
				[+previous+] [+pages+] [+next+]
			</div>
			<div class="dropdown">
				<button class="btn dropdown-toggle sr-only" type="button" id="dropdownMenu1" data-toggle="dropdown">
					Сортировка
					<span class="caret"></span>
				</button>
				<ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu1">
					<li role="presentation"><a role="menuitem" tabindex="-1" href="[~[*id*]~]?sort=pagetitle">По имени</a></li>
					<li role="presentation"><a role="menuitem" tabindex="-1"  href="[~[*id*]~]?sort=price">По цене</a></li>
					
				</ul>
			</div>
		</div>
		[!Ditto? &parents=`21` &tpl=`productItemTpl` &tplLast=`productItemLastTpl` &paginate=`1` &summarize=`9` &depth=`3` &hideFolders=`1` &orderBy=`[!sortBy!] ASC`!]
		<div class="pagination">
						 [+previous+] [+pages+] [+next+]
					</div>
	</div>
</div>

';
$c['productItemTpl'] = '[[if? &is=`[+ditto_iteration+]:is:0` &then=`<div class="row-fluid">`]]
[[if? &is=`[+ditto_iteration+]:%:3:and:[+ditto_iteration+]:>:0` &then=`</div><div class="row-fluid">`]]
<div class="span4 product-item">
	<a href="[~[+id+]~]"><img src="[[phpthumb? &input=`[+mainProductImage+]` &options=`w=210,h=343,far=C,bg=FFFFFF`]]" alt="[+pagetitle+]"/></a>
	<div class="product-info">
		<a href="[~[+id+]~]">[+pagetitle+]</a>
		<span class="price">[+price+]</span>
		<span class="price">[+price2+]</span>
		<div class="color-list">
			[[colorList? &color=`[+color+]` ]]
		</div>
	</div>
</div>';
$c['productItemLastTpl'] = '[[if? &is=`[+ditto_iteration+]:%:3` &then=`<div class="row-fluid">`]]
<div class="span4 product-item">
	<a href="[~[+id+]~]"><img src="[[phpthumb? &input=`[+mainProductImage+]` &options=`w=210,h=343,far=C,bg=FFFFFF`]]" alt="[+pagetitle+]"/></a><br/>
	<div class="product-info">
		<a href="[~[+id+]~]">[+pagetitle+]</a>
		<span class="price">[+price+]</span>
		<span class="price">[+price2+]</span>
		<div class="color-list">
			[[colorList? &color=`[+color+]` ]]
		</div>
	</div>
</div>
</div>';
$c['randomProductTpl'] = '<a href="[~[+id+]~]" title="[+pagetitle+]"><img src="[[phpthumb? &input=`[+mainProductImage+]` &options=`w=150,h=150,far=C,bg=FFFFFF`]]" alt="[+pagetitle+]"/></a>';
$c['randomProductLastTpl'] = '<div class="span6"><img src="[[phpthumb? &input=`[+mainProductImage+]` &options=`w=180,h=180,far=C,bg=FFFFFF`]]" alt="[+pagetitle+]"/><br/><a href="[~[+id+]~]">[+pagetitle+]</a></div></div>';
$c['rightPanel'] = '<div class="span4 gallery"><img src="[[phpthumb? &amp;input=`[*mainProductImage*]` &amp;options=`w=365,h=597,far=C,bg=FFFFFF`]]" alt="[*pagetitle*]" class="main-image" />
<div class="row-fluid thumb-image-list"><a href="[[phpthumb? &amp;input=`[*mainProductImage*]` &amp;options=`w=365,h=597,far=C,bg=FFFFFF`]]" class="active"> <img src="[[phpthumb? &amp;input=`[*mainProductImage*]` &amp;options=`w=180,h=180,far=C,bg=FFFFFF`]]" alt="[+pagetitle+]" /> </a> [!multiTV? &amp;tvName=`images` &amp;docid=`[*id*]` &amp;tplConfig=`` &amp;outerTpl=`@CODE:((wrapper))` &amp;rowTpl=`thumbImageProduct` &amp;display=`all` &amp;rows=`all` &amp;toPlaceholder=`` &amp;randomize=`0` &amp;orderBy=`` &amp;published=`1` &amp;emptyOutput=`1` &amp;emptyOutput=`1` &amp;outputSeparator=`` !]</div>
</div>
<div class="span8">
	<h1 class="product-name">[*pagetitle*]<strong><span class="price">[*price*]</span><span class="price">[*price2*]</span></strong></h1>
[*content*]
		<p class="details">[*details*]</p>
<div class="attributes-list">
<h3 class="product-detail">Цвет</h3>
<div class="color-list">[[colorList? &amp;color=`[*color*]` ]]</div><br><br>
<h3 class="product-detail">Размер</h3>
<div class="size-list">[[sizeList? &amp;size=`[*size*]` ]]</div><br>
	<h3 class="product-detail">Детали:</h3>
	<p><b>Код: </b>[*code*]; <b><br>Фасон: </b>[*style*]; <b><br>Сезон: </b>[*season*]; <b><br>Состав: </b>[*composition*]; <b><br>Тип карманов: </b>[*typePockets*]; <b><br>Количество карманов (шт.): </b>[*numberPockets*]; <b><br>Тип ткани: </b>[*cloth*].  </p>
	
<!-- <h3>Код</h3>
<p>[*code*]</p>
<h3>Фасон</h3>
<p>[*style*]</p>
<h3>Сезон</h3>
<p>[*season*]</p>
<h3>Состав</h3>
<p>[*composition*]</p>
<h3>Тип карманов</h3>
<p>[*typePockets*]</p>
<h3>Количество карманов (шт.)</h3>
<p>[*numberPockets*]</p>
<h3>Тип ткани</h3>
<p>[*cloth*]</p>
 -->

</div>
</div>';
$c['thumbImageProduct'] = '<a href="[[phpthumb? &input=`[+image+]` &options=`w=365,h=597,far=C,bg=FFFFFF`]]" class="thumb">
				<img src="[[phpthumb? &input=`[+image+]` &options=`w=180,h=180,far=C,bg=FFFFFF`]]" alt="[+title+]"/>
			</a>';
$c['attributesList'] = '<div class="row-fluid attributes-list">
	<div class="span6">
		<div class="span6 title"><span>Производитель</span></div>
		<div class="span6 value"><span>[*manufacturer*]</span></div>
	</div>
	<div class="span6">
		<div class="span6 title"><span>Страна производитель</span></div>
		<div class="span6 value"><span>[*сountry *]</span></div>
	</div>
</div>
<div class="row-fluid attributes-list">
	<div class="span6">
		<div class="span6 title"><span>Код</span></div>
		<div class="span6 value"><span>[*code*]</span></div>
	</div>
	<div class="span6">
		<div class="span6 title"><span>Фасон</span></div>
		<div class="span6 value"><span>[*style*]</span></div>
	</div>
</div>
<div class="row-fluid attributes-list">
	<div class="span6">
		<div class="span6 title"><span>Цвет</span></div>
		<div class="span6 value" style="background-color:[*color*];height:10px;"></div>
	</div>
	<div class="span6">
		<div class="span6 title"><span>Сезон</span></div>
		<div class="span6 value"><span>[*season*]</span></div>
	</div>
</div>
<div class="row-fluid attributes-list">
	<div class="span6">
		<div class="span6 title"><span>Посадка</span></div>
		<div class="span6 value"><span>[*fit*]</span></div>
	</div>
	<div class="span6">
		<div class="span6 title"><span>Тип ткани</span></div>
		<div class="span6 value"><span>[*fabricType*]</span></div>
	</div>
</div>
<div class="row-fluid attributes-list">
	<div class="span6">
		<div class="span6 title"><span>Состав</span></div>
		<div class="span6 value"><span>[*composition*]</span></div>
	</div>
	<div class="span6">
		<div class="span6 title"><span>Количество карманов (шт.)</span></div>
		<div class="span6 value"><span>[*numberPockets*]</span></div>
	</div>
</div>';
$c['jobsTpl'] = '<div class="job">
	<h2>[+pagetitle+]</h2>
	[+content+]
</div>';
$c['catalogItemBigTpl'] = '<div class="span8 catalog-item">
	[+iconCategory+]
	<div class="category-info">
		<h2>[+pagetitle+]</h2>
		<a href="[~[+id+]~]">Далее</a>
	</div>
	
</div>';
$c['yandex-metrica'] = '<!-- Yandex.Metrika counter -->
<script type="text/javascript">
var yaParams = {/*Здесь параметры визита*/};
</script>

<script type="text/javascript">
(function (d, w, c) {
    (w[c] = w[c] || []).push(function() {
        try {
            w.yaCounter25022690 = new Ya.Metrika({id:25022690,
                    webvisor:true,
                    clickmap:true,
                    trackLinks:true,
                    accurateTrackBounce:true,
                    trackHash:true,params:window.yaParams||{ }});
        } catch(e) { }
    });

    var n = d.getElementsByTagName("script")[0],
        s = d.createElement("script"),
        f = function () { n.parentNode.insertBefore(s, n); };
    s.type = "text/javascript";
    s.async = true;
    s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js";

    if (w.opera == "[object Opera]") {
        d.addEventListener("DOMContentLoaded", f, false);
    } else { f(); }
})(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="//mc.yandex.ru/watch/25022690" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->


<script>
  (function(i,s,o,g,r,a,m){i[\'GoogleAnalyticsObject\']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,\'script\',\'//www.google-analytics.com/analytics.js\',\'ga\');

  ga(\'create\', \'UA-52611827-1\', \'auto\');
  ga(\'send\', \'pageview\');

</script>';
$s = &$this->snippetCache;
$s['AjaxSearch'] = 'return require MODX_BASE_PATH.\'assets/snippets/ajaxSearch/snippet.ajaxSearch.php\';';
$s['Breadcrumbs'] = 'return require MODX_BASE_PATH.\'assets/snippets/breadcrumbs/snippet.breadcrumbs.php\';';
$s['Ditto'] = 'return require MODX_BASE_PATH.\'assets/snippets/ditto/snippet.ditto.php\';';
$s['eForm'] = 'return require MODX_BASE_PATH.\'assets/snippets/eform/snippet.eform.php\';';
$s['FirstChildRedirect'] = 'return require MODX_BASE_PATH.\'assets/snippets/firstchildredirect/snippet.firstchildredirect.php\';';
$s['if'] = 'return require MODX_BASE_PATH.\'assets/snippets/if/snippet.if.php\';';
$s['Jot'] = '/*####
#
# Author: Armand "bS" Pondman (apondman@zerobarrier.nl)
#
# Latest Version: http://modx.com/extras/package/jot
# Jot Demo Site: http://projects.zerobarrier.nl/modx/
# Documentation: http://wiki.modxcms.com/index.php/Jot (wiki)
#
####*/

$jotPath = $modx->config[\'base_path\'] . \'assets/snippets/jot/\';
include_once($jotPath.\'jot.class.inc.php\');

$Jot = new CJot;
$Jot->VersionCheck("1.1.4");
$Jot->Set("path",$jotPath);
$Jot->Set("action", $action);
$Jot->Set("postdelay", $postdelay);
$Jot->Set("docid", $docid);
$Jot->Set("tagid", $tagid);
$Jot->Set("subscribe", $subscribe);
$Jot->Set("moderated", $moderated);
$Jot->Set("captcha", $captcha);
$Jot->Set("badwords", $badwords);
$Jot->Set("bw", $bw);
$Jot->Set("sortby", $sortby);
$Jot->Set("numdir", $numdir);
$Jot->Set("customfields", $customfields);
$Jot->Set("guestname", $guestname);
$Jot->Set("canpost", $canpost);
$Jot->Set("canview", $canview);
$Jot->Set("canedit", $canedit);
$Jot->Set("canmoderate", $canmoderate);
$Jot->Set("trusted", $trusted);
$Jot->Set("pagination", $pagination);
$Jot->Set("placeholders", $placeholders);
$Jot->Set("subjectSubscribe", $subjectSubscribe);
$Jot->Set("subjectModerate", $subjectModerate);
$Jot->Set("subjectAuthor", $subjectAuthor);
$Jot->Set("notify", $notify);
$Jot->Set("notifyAuthor", $notifyAuthor);
$Jot->Set("validate", $validate);
$Jot->Set("title", $title);
$Jot->Set("authorid", $authorid);
$Jot->Set("css", $css);
$Jot->Set("cssFile", $cssFile);
$Jot->Set("cssRowAlt", $cssRowAlt);
$Jot->Set("cssRowMe", $cssRowMe);
$Jot->Set("cssRowAuthor", $cssRowAuthor);
$Jot->Set("tplForm", $tplForm);
$Jot->Set("tplComments", $tplComments);
$Jot->Set("tplModerate", $tplModerate);
$Jot->Set("tplNav", $tplNav);
$Jot->Set("tplNotify", $tplNotify);
$Jot->Set("tplNotifyModerator", $tplNotifyModerator);
$Jot->Set("tplNotifyAuthor", $tplNotifyAuthor);
$Jot->Set("tplSubscribe", $tplSubscribe);
$Jot->Set("debug", $debug);
$Jot->Set("output", $output);
return $Jot->Run();';
$s['ListIndexer'] = 'return require MODX_BASE_PATH.\'assets/snippets/listindexer/snippet.listindexer.php\';';
$s['MemberCheck'] = 'return require MODX_BASE_PATH.\'assets/snippets/membercheck/snippet.membercheck.php\';';
$s['Personalize'] = 'return require MODX_BASE_PATH.\'assets/snippets/personalize/snippet.personalize.php\';';
$s['phpthumb'] = 'return require MODX_BASE_PATH.\'assets/snippets/phpthumb/snippet.phpthumb.php\';';
$s['Reflect'] = '/*
 * Author: 
 *      Mark Kaplan for MODX CMF
 * 
 * Note: 
 *      If Reflect is not retrieving its own documents, make sure that the
 *          Ditto call feeding it has all of the fields in it that you plan on
 *       calling in your Reflect template. Furthermore, Reflect will ONLY
 *          show what is currently in the Ditto result set.
 *       Thus, if pagination is on it will ONLY show that page\'s items.
*/
 

// ---------------------------------------------------
//  Includes
// ---------------------------------------------------

$reflect_base = isset($reflect_base) ? $modx->config[\'base_path\'].$reflect_base : $modx->config[\'base_path\']."assets/snippets/reflect/";
/*
    Param: ditto_base
    
    Purpose:
    Location of Ditto files

    Options:
    Any valid folder location containing the Ditto source code with a trailing slash

    Default:
    [(base_path)]assets/snippets/ditto/
*/

$config = (isset($config)) ? $config : "default";
/*
    Param: config

    Purpose:
    Load a custom configuration

    Options:
    "default" - default blank config file
    CONFIG_NAME - Other configs installed in the configs folder or in any folder within the MODX base path via @FILE

    Default:
    "default"
    
    Related:
    - <extenders>
*/

require($reflect_base."configs/default.config.php");
require($reflect_base."default.templates.php");
if ($config != "default") {
    require((substr($config, 0, 5) != "@FILE") ? $reflect_base."configs/$config.config.php" : $modx->config[\'base_path\'].trim(substr($config, 5)));
}

// ---------------------------------------------------
//  Parameters
// ---------------------------------------------------

$id = isset($id) ? $id."_" : false;
/*
    Param: id

    Purpose:
    Unique ID for this Ditto instance for connection with other scripts (like Reflect) and unique URL parameters

    Options:
    Any valid folder location containing the Ditto source code with a trailing slash

    Default:
    "" - blank
*/
$getDocuments = isset($getDocuments) ? $getDocuments : 0;
/*
    Param: getDocuments

    Purpose:
    Force Reflect to get documents

    Options:
    0 - off
    1 - on
    
    Default:
    0 - off
*/
$showItems = isset($showItems) ? $showItems : 1;
/*
    Param: showItems

    Purpose:
    Show individual items in the archive

    Options:
    0 - off
    1 - on
    
    Default:
    1 - on
*/
$groupByYears = isset($groupByYears)? $groupByYears : 1;
/*
    Param: groupByYears

    Purpose:
    Group the archive by years

    Options:
    0 - off
    1 - on
    
    Default:
    1 - on
*/
$targetID = isset($targetID) ? $targetID : $modx->documentObject[\'id\'];
/*
    Param: targetID

    Purpose:
    ID for archive links to point to

    Options:
    Any MODX document with a Ditto call setup with extenders=`dateFilter`
    
    Default:
    Current MODX Document
*/
$dateSource = isset($dateSource) ? $dateSource : "createdon";
/*
    Param: dateSource

    Purpose:
    Date source to display for archive items

    Options:
    # - Any UNIX timestamp from MODX fields or TVs such as createdon, pub_date, or editedon
    
    Default:
    "createdon"
    
    Related:
    - <dateFormat>
*/
$dateFormat = isset($dateFormat) ? $dateFormat : "%d-%b-%y %H:%M";  
/*
    Param: dateFormat

    Purpose:
    Format the [+date+] placeholder in human readable form

    Options:
    Any PHP valid strftime option

    Default:
    "%d-%b-%y %H:%M"
    
    Related:
    - <dateSource>
*/
$yearSortDir = isset($yearSortDir) ? $yearSortDir : "DESC";
/*
    Param: yearSortDir

    Purpose:
    Direction to sort documents

    Options:
    ASC - ascending
    DESC - descending

    Default:
    "DESC"
    
    Related:
    - <monthSortDir>
*/
$monthSortDir = isset($monthSortDir) ? $monthSortDir : "ASC";
/*
    Param: monthSortDir

    Purpose:
    Direction to sort the months

    Options:
    ASC - ascending
    DESC - descending

    Default:
    "ASC"
    
    Related:
    - <yearSortDir>
*/
$start = isset($start)? intval($start) : 0;
/*
    Param: start

    Purpose:
    Number of documents to skip in the results
    
    Options:
    Any number

    Default:
    0
*/  
$phx = (isset($phx))? $phx : 1;
/*
    Param: phx

    Purpose:
    Use PHx formatting

    Options:
    0 - off
    1 - on
    
    Default:
    1 - on
*/

// ---------------------------------------------------
//  Initialize Ditto
// ---------------------------------------------------
$placeholder = ($id != false && $getDocuments == 0) ? true : false;
if ($placeholder === false) {
    $rID = "reflect_".rand(1,1000);
    $itemTemplate = isset($tplItem) ? $tplItem: "@CODE:".$defaultTemplates[\'item\'];
    $dParams = array(
        "id" => "$rID",
        "save" => "3",  
        "summarize" => "all",
        "tpl" => $itemTemplate,
    );
    
    $source = $dittoSnippetName;
    $params = $dittoSnippetParameters;
        // TODO: Remove after 3.0
        
    if (isset($params)) {
        $givenParams = explode("|",$params);
        foreach ($givenParams as $parameter) {
            $p = explode(":",$parameter);
            $dParams[$p[0]] = $p[1];
        }
    }
    /*
        Param: params

        Purpose:
        Pass parameters to the Ditto instance used to retreive the documents

        Options:
        Any valid ditto parameters in the format name:value 
        with multiple parameters separated by a pipe (|)
        
        Note:
        This parameter is only needed for config, start, and phx as you can
        now simply use the parameter as if Reflect was Ditto

        Default:
        [NULL]
    */
    
    $reflectParameters = array(\'reflect_base\',\'config\',\'id\',\'getDocuments\',\'showItems\',\'groupByYears\',\'targetID\',\'yearSortDir\',\'monthSortDir\',\'start\',\'phx\',\'tplContainer\',\'tplYear\',\'tplMonth\',\'tplMonthInner\',\'tplItem\',\'save\');
    $params =& $modx->event->params;
    if(is_array($params)) {
        foreach ($params as $param=>$value) {
            if (!in_array($param,$reflectParameters) && substr($param,-3) != \'tpl\') {
                $dParams[$param] = $value;
            }
        }
    }

    $source = isset($source) ? $source : "Ditto";
    /*
        Param: source

        Purpose:
        Name of the Ditto snippet to use

        Options:
        Any valid snippet name

        Default:
        "Ditto"
    */
    $snippetOutput = $modx->runSnippet($source,$dParams);
    $ditto = $modx->getPlaceholder($rID."_ditto_object");
    $resource = $modx->getPlaceholder($rID."_ditto_resource");
} else {
    $ditto = $modx->getPlaceholder($id."ditto_object");
    $resource = $modx->getPlaceholder($id."ditto_resource");
}
if (!is_object($ditto) || !isset($ditto) || !isset($resource)) {
    return !empty($snippetOutput) ? $snippetOutput : "The Ditto object is invalid. Please check it.";
}

// ---------------------------------------------------
//  Templates
// ---------------------------------------------------

$templates[\'tpl\'] = isset($tplContainer) ? $ditto->template->fetch($tplContainer): $defaultTemplates[\'tpl\'];
/*
    Param: tplContainer

    Purpose:
    Container template for the archive

    Options:
    - Any valid chunk name
    - Code via @CODE:
    - File via @FILE:

    Default:
    See default.tempates.php
*/
$templates[\'year\'] = isset($tplYear) ? $ditto->template->fetch($tplYear): $defaultTemplates[\'year\'];
/*
    Param: tplYear

    Purpose:
    Template for the year item

    Options:
    - Any valid chunk name
    - Code via @CODE:
    - File via @FILE:

    Default:
    See default.tempates.php
*/
$templates[\'year_inner\'] = isset($tplYearInner) ? $ditto->template->fetch($tplYearInner): $defaultTemplates[\'year_inner\'];
/*
    Param: tplYearInner

    Purpose:
    Template for the year item (the ul to hold the year template)

    Options:
    - Any valid chunk name
    - Code via @CODE:
    - File via @FILE:

    Default:
    See default.tempates.php
*/
$templates[\'month\'] = isset($tplMonth) ? $ditto->template->fetch($tplMonth): $defaultTemplates[\'month\'];
/*
    Param: tplMonth

    Purpose:
    Template for the month item

    Options:
    - Any valid chunk name
    - Code via @CODE:
    - File via @FILE:

    Default:
    See default.tempates.php
*/
$templates[\'month_inner\'] = isset($tplMonthInner) ? $ditto->template->fetch($tplMonthInner): $defaultTemplates[\'month_inner\'];
/*
    Param: tplMonthInner

    Purpose:
    Template for the month item  (the ul to hold the month template)

    Options:
    - Any valid chunk name
    - Code via @CODE:
    - File via @FILE:

    Default:
    See default.tempates.php
*/
$templates[\'item\'] = isset($tplItem) ? $ditto->template->fetch($tplItem): $defaultTemplates[\'item\'];
/*
    Param: tplItem

    Purpose:
    Template for the individual item

    Options:
    - Any valid chunk name
    - Code via @CODE:
    - File via @FILE:

    Default:
    See default.tempates.php
*/

$ditto->addField("date","display","custom");
    // force add the date field if receiving data from a Ditto instance

// ---------------------------------------------------
//  Reflect
// ---------------------------------------------------

if (function_exists("reflect") === FALSE) {
function reflect($templatesDocumentID, $showItems, $groupByYears, $resource, $templatesDateSource, $dateFormat, $ditto, $templates,$id,$start,$yearSortDir,$monthSortDir) {
    global $modx;
    $cal = array();
    $output = \'\';
    $ph = array(\'year\'=>\'\',\'month\'=>\'\',\'item\'=>\'\',\'out\'=>\'\');
    $build = array();
    $stop = count($resource);

    // loop and fetch all the results
    for ($i = $start; $i < $stop; $i++) {
        $date = getdate($resource[$i][$templatesDateSource]);
        $year = $date["year"];
        $month = $date["mon"];
        $cal[$year][$month][] = $resource[$i];
    }
    if ($yearSortDir == "DESC") {
        krsort($cal);
    } else {
        ksort($cal);
    }
    foreach ($cal as $year=>$months) {
        if ($monthSortDir == "ASC") {
            ksort($months);
        } else {
            krsort($months);
        }
        $build[$year] = $months;
    }
    
    foreach ($build as $year=>$months) {
        $r_year = \'\';
        $r_month = \'\';
        $r_month_2 = \'\';
        $year_count = 0;
        $items = array();
        
        foreach ($months as $mon=>$month) {
            $month_text = strftime("%B", mktime(10, 10, 10, $mon, 10, $year));
            $month_url = $ditto->buildURL("month=".$mon."&year=".$year."&day=false&start=0",$templatesDocumentID,$id);
            $month_count = count($month);
            $year_count += $month_count;
            $r_month = $ditto->template->replace(array("year"=>$year,"month"=>$month_text,"url"=>$month_url,"count"=>$month_count),$templates[\'month\']);
            if ($showItems) {
                foreach ($month as $item) {
                    $items[$year][$mon][\'items\'][] = $ditto->render($item, $templates[\'item\'], false, $templatesDateSource, $dateFormat, array(),$phx);
                }
                $r_month_2 = $ditto->template->replace(array(\'wrapper\' => implode(\'\',$items[$year][$mon][\'items\'])),$templates[\'month_inner\']);
                $items[$year][$mon] = $ditto->template->replace(array(\'wrapper\' => $r_month_2),$r_month);
            } else {
                $items[$year][$mon] = $r_month;
            }
        }
        if ($groupByYears) {
            $year_url = $ditto->buildURL("year=".$year."&month=false&day=false&start=0",$templatesDocumentID,$id);
            $r_year =  $ditto->template->replace(array("year"=>$year,"url"=>$year_url,"count"=>$year_count),$templates[\'year\']);
            $var = $ditto->template->replace(array(\'wrapper\'=>implode(\'\',$items[$year])),$templates[\'year_inner\']);
            $output .= $ditto->template->replace(array(\'wrapper\'=>$var),$r_year);
        } else {
            $output .= implode(\'\',$items[$year]);
        }
    }

    $output = $ditto->template->replace(array(\'wrapper\'=>$output),$templates[\'tpl\']);
    $modx->setPlaceholder($id.\'reset\',$ditto->buildURL(\'year=false&month=false&day=false\',$templatesDocumentID,$id));

return $output;
    
}
}

return reflect($targetID, $showItems, $groupByYears, $resource, $dateSource, $dateFormat, $ditto, $templates,$id,$start,$yearSortDir,$monthSortDir);';
$s['UltimateParent'] = 'return require MODX_BASE_PATH.\'assets/snippets/ultimateparent/snippet.ultimateparent.php\';';
$s['Wayfinder'] = 'return require MODX_BASE_PATH.\'assets/snippets/wayfinder/snippet.wayfinder.php\';
';
$s['WebChangePwd'] = '# Created By Raymond Irving April, 2005
#::::::::::::::::::::::::::::::::::::::::
# Params:	
#
#	&tpl			- (Optional)
#		Chunk name or document id to use as a template
#				  
#	Note: Templats design:
#			section 1: change pwd template
#			section 2: notification template 
#
# Examples:
#
#	[[WebChangePwd? &tpl=`ChangePwd`]] 

# Set Snippet Paths 
$snipPath  = (($modx->insideManager())? "../":"");
$snipPath .= "assets/snippets/";

# check if inside manager
if ($m = $modx->insideManager()) {
	return \'\'; # don\'t go any further when inside manager
}


# Snippet customize settings
$tpl		= isset($tpl)? $tpl:"";

# System settings
$isPostBack		= count($_POST) && isset($_POST[\'cmdwebchngpwd\']);

# Start processing
include_once $snipPath."weblogin/weblogin.common.inc.php";
include_once $snipPath."weblogin/webchangepwd.inc.php";

# Return
return $output;



';
$s['WebLogin'] = '# Created By Raymond Irving 2004
#::::::::::::::::::::::::::::::::::::::::
# Params:	
#
#	&loginhomeid 	- (Optional)
#		redirects the user to first authorized page in the list.
#		If no id was specified then the login home page id or 
#		the current document id will be used
#
#	&logouthomeid 	- (Optional)
#		document id to load when user logs out	
#
#	&pwdreqid 	- (Optional)
#		document id to load after the user has submited
#		a request for a new password
#
#	&pwdactid 	- (Optional)
#		document id to load when the after the user has activated
#		their new password
#
#	&logintext		- (Optional) 
#		Text to be displayed inside login button (for built-in form)
#
#	&logouttext 	- (Optional)
#		Text to be displayed inside logout link (for built-in form)
#	
#	&tpl			- (Optional)
#		Chunk name or document id to as a template
#				  
#	Note: Templats design:
#			section 1: login template
#			section 2: logout template 
#			section 3: password reminder template 
#
#			See weblogin.tpl for more information
#
# Examples:
#
#	[[WebLogin? &loginhomeid=`8` &logouthomeid=`1`]] 
#
#	[[WebLogin? &loginhomeid=`8,18,7,5` &tpl=`Login`]] 

# Set Snippet Paths 
$snipPath = $modx->config[\'base_path\'] . "assets/snippets/";

# check if inside manager
if ($m = $modx->insideManager()) {
	return \'\'; # don\'t go any further when inside manager
}

# deprecated params - only for backward compatibility
if(isset($loginid)) $loginhomeid=$loginid;
if(isset($logoutid)) $logouthomeid = $logoutid;
if(isset($template)) $tpl = $template;

# Snippet customize settings
$liHomeId	= isset($loginhomeid)? array_filter(array_map(\'intval\', explode(\',\', $loginhomeid))):array($modx->config[\'login_home\'],$modx->documentIdentifier);
$loHomeId	= isset($logouthomeid)? $logouthomeid:$modx->documentIdentifier;
$pwdReqId	= isset($pwdreqid)? $pwdreqid:0;
$pwdActId	= isset($pwdactid)? $pwdactid:0;
$loginText	= isset($logintext)? $logintext:\'Login\';
$logoutText	= isset($logouttext)? $logouttext:\'Logout\';
$tpl		= isset($tpl)? $tpl:"";

# System settings
$webLoginMode = isset($_REQUEST[\'webloginmode\'])? $_REQUEST[\'webloginmode\']: \'\';
$isLogOut		= $webLoginMode==\'lo\' ? 1:0;
$isPWDActivate	= $webLoginMode==\'actp\' ? 1:0;
$isPostBack		= count($_POST) && (isset($_POST[\'cmdweblogin\']) || isset($_POST[\'cmdweblogin_x\']));
$txtPwdRem 		= isset($_REQUEST[\'txtpwdrem\'])? $_REQUEST[\'txtpwdrem\']: 0;
$isPWDReminder	= $isPostBack && $txtPwdRem==\'1\' ? 1:0;

$site_id = isset($site_id)? $site_id: \'\';
$cookieKey = substr(md5($site_id."Web-User"),0,15);

# Start processing
include_once $snipPath."weblogin/weblogin.common.inc.php";
include_once ($modx->config[\'site_manager_path\'] . "includes/crypt.class.inc.php");

if ($isPWDActivate || $isPWDReminder || $isLogOut || $isPostBack) {
	# include the logger class
	include_once $modx->config[\'site_manager_path\'] . "includes/log.class.inc.php";
	include_once $snipPath."weblogin/weblogin.processor.inc.php";
}

include_once $snipPath."weblogin/weblogin.inc.php";

# Return
return $output;
';
$s['WebLoginProps'] = '&loginhomeid=Login Home Id;string; &logouthomeid=Logout Home Id;string; &logintext=Login Button Text;string; &logouttext=Logout Button Text;string; &tpl=Template;string; ';
$s['WebSignup'] = '# Created By Raymond Irving April, 2005
#::::::::::::::::::::::::::::::::::::::::
# Usage:     
#    Allows a web user to signup for a new web account from the website
#    This snippet provides a basic set of form fields for the signup form
#    You can customize this snippet to create your own signup form
#
# Params:    
#
#    &tpl        - (Optional) Chunk name or document id to use as a template
#	    		   If custom template AND captcha on AND using WebSignup and 
#                  WebLogin on the same page make sure you have a field named
#                  cmdwebsignup. In the default template it is the submit button 
#                  One can use a hidden field.
#    &groups     - Web users groups to be assigned to users
#    &useCaptcha - (Optional) Determine to use (1) or not to use (0) captcha
#                  on signup form - if not defined, will default to system
#                  setting. GD is required for this feature. If GD is not 
#                  available, useCaptcha will automatically be set to false;
#                  
#    Note: Templats design:
#        section 1: signup template
#        section 2: notification template 
#
# Examples:
#
#    [[WebSignup? &tpl=`SignupForm` &groups=`NewsReaders,WebUsers`]] 

# Set Snippet Paths 
$snipPath = $modx->config[\'base_path\'] . "assets/snippets/";

# check if inside manager
if ($m = $modx->insideManager()) {
    return \'\'; # don\'t go any further when inside manager
}


# Snippet customize settings
$tpl = isset($tpl)? $tpl:"";
$useCaptcha = isset($useCaptcha)? $useCaptcha : $modx->config[\'use_captcha\'] ;
// Override captcha if no GD
if ($useCaptcha && !gd_info()) $useCaptcha = 0;

# setup web groups
$groups = isset($groups) ? array_filter(array_map(\'trim\', explode(\',\', $groups))):array();

# System settings
$isPostBack        = count($_POST) && isset($_POST[\'cmdwebsignup\']);

$output = \'\';

# Start processing
include_once $snipPath."weblogin/weblogin.common.inc.php";
include_once $snipPath."weblogin/websignup.inc.php";

# Return
return $output;';
$s['WebSignupProps'] = '&tpl=Template;string; ';
$s['multiTV'] = '
return include(MODX_BASE_PATH.\'assets/tvs/multitv/multitv.snippet.php\');
';
$s['splitPagination'] = '
/**
 * splitPagination
 *
 * Create split pagination for large Ditto result sets
 * 
 * @category	snippet
 * @version 	2.0
 * @license 	http://www.gnu.org/copyleft/gpl.html GNU Public License (GPL)
 * @internal	@properties 
 * @internal	@modx_category Navigation
 * @author		Nick Crossland - rckt.co.uk. Based on the function written by Aaron Hall, evilwalrus.org.
 */
 

/* 

PURPOSE
When a Ditto result set is large, the pagination can grow too large to fit comfortably and usably on the page. 
This snippet provides alternative "Google" style pagination, where a maximum number of pages are shown - the 
first and last pages of the results, and the pages immediately surrounding the current page.
 e.g. instead Ditto\'s default pagination output of

[1] [2] [3] [4] [5] [6] [7] [8] [9] [10] [*11*] [12] [13] [14] [15] [16] [17] [18] [19] [20]

(current page is 11) this snippet produces

[1] [2] ... [8] [9] [10] [*11*] [12] [13] [14] ... [19] [20]


REQUIREMENTS
This snippet is tested with Ditto 2.1 in ModX Evo 1.0.x


INSTALLATION
Create a new snippet named splitPagination, and paste the contents of this file into it. 


USAGE
Place the snippet immediately following a Ditto call. 

e.g. 1 

[[splitPagination]]
will just create a placeholder named "splitPages" - to insert the pagination bar into the correct place of your document use the [+splitPages+] placeholder

e.g.2
[[splitPagination? &id=`myDitto` &pagesToShow=`10` &constantEndCount=`3` &ellipses=`myChunk` &return=`1`]]
will output the pagination directly, using data obtained from the Ditto call with the ID of "myDitto". 
It will display a maximum of 10 links to pages, with three before/after the ellipses at the beginning and end. 
The HTML to use for the ellipses will be obtained from the "myChunk" chunk.


PARAMETERS

 Param: id

    Purpose:
    If there is more than one Ditto call on a page, or your Ditto call has the ID paramater set, this is required to 
	know which Ditto ID to use.

    Options:
    Ditto ID parameter
	
	Default:
    <none>
	
	
	
 Param: pagesToShow

    Purpose:
    Maximum number of page links to show. Any pages above this number will be replaced by ellipses. 
	Sets of ellipses are included in this count, to ensure the total size of the pagination remains largely 
	the same regardless of current position.

    Options:
    Number
	
	Default:
    15	
	


 Param: constantEndCount

    Purpose:
    Number of pages links to display at the beginning and end of the results set, before and after the ellipses
	e.g. set to 2, the results would display:	
	[1] [2] ... [99] [100]
	
	or set to 4, the results would display:
	[1] [2] [3] [4] ... [97] [98] [99] [100]	

    Options:
    Number
	
	Default:
    2	
	
	
 Param: return

    Purpose:
    Output the pagination directly from the location of the snippet, rather than to a placeholder

    Options:
    Boolean
	
	Default:
    0	


	
 Param: tplEllipses

    Purpose:
    Chunk name, or HTML that should be used to indicate a break in the page numbering. ModX doesn\'t work very
	well (as of 1.0.x) with = sign within parameters, so if you wish to use HTML containing = sign, it is 
	suggested to put it in a chunk rather than supply HTML directly.

    Options:
    Chunk name or HTML
	
	Default:
    <span class="splitPagination">...</span>	
	

 Param: tplCurrent

    Purpose:
    Chunk name, or HTML that should be used for the current results page. ModX doesn\'t work very
	well (as of 1.0.x) with = sign within parameters, so if you wish to use HTML containing = sign, it is 
	suggested to put it in a chunk rather than supply HTML directly.
	
	The [+page+] placeholder will be replaced by the page number
	The [+class+] placeholder will be replace by a class representing first or last items if this applies (see firstClass and lastClass params)

    Options:
    Chunk name or HTML
	
	Default:
    <span class="ditto_currentpage ditto_page_[+page+][+class+]">[+page+]</span>		
	
	

 Param: tplPageLink

    Purpose:
    Chunk name, or HTML that should be used for links to all results page (other than current). ModX doesn\'t work very
	well (as of 1.0.x) with = sign within parameters, so if you wish to use HTML containing = sign, it is 
	suggested to put it in a chunk rather than supply HTML directly.
	
	The [+page+] placeholder will be replaced by the page number
	The [+url+] placeholder will be replaced by the link URL
	The [+class+] placeholder will be replace by a class representing first or last items if this applies (see firstClass and lastClass params)

    Options:
    Chunk name or HTML
	
	Default:
    <a class="ditto_page ditto_page_[+page+][+class+]" href="[+url+]">[+page+]</a>



 Param: firstClass

    Purpose:
    Class applied to the first page link
	
    Options:
    HTML class
	
	Default:
    first



 Param: lastClass

    Purpose:
    Class applied to the last page link
	
    Options:
    HTML class
	
	Default:
    last
	

---------------------------------------------------------------------------------------
The following parameters are available as manual overrides, however they are normally 
populated with correct values automatically.
	
	
 Param: total

    Purpose:
   	Total number of results from the Ditto query - usually obtained automatically from Ditto. Setting manually may have
	unpredictable results!

    Options:
    Number
	
	Default:
    From Ditto results	
	
	
	
 Param: start

    Purpose:
   	Start position of results from the Ditto query - usually obtained automatically from Ditto. Setting manually may have
	unpredictable results!

    Options:
    Number
	
	Default:
    From Ditto results		
	
	
	
 Param: display

    Purpose:
   	Number of results per page to display - usually obtained automatically from Ditto. Setting manually may have
	unpredictable results!

    Options:
    Number
	
	Default:
    From Ditto results	
	
	
	
 Param: currentPage

    Purpose:
   	Override current page. Usually automatically calculated. Setting manually may have
	unpredictable results!

    Options:
    Number
	
	Default:
    From URL	


	
 Param: landing

    Purpose:
   	Landing page for pagination links. 

    Options:
    Document ID
	
	Default:
    Current page
	
	


 


*/



if (!function_exists("generatePagination")) {
	
function generatePagination($currentPage, $totalResults, $resultsPerPage, $pagesToShow, $constantEndCount) {
	
	// How many pages are there altogether?
	$totalPages = ceil($totalResults / $resultsPerPage);
	
	// How far through are we?
	$pagesBefore = $currentPage - 1;
	$pagesAfter = $totalPages - $currentPage;
	
	// An array of tabs to display (made up of page numbers)
	$tabArr = array();
	
	// If we need to split the pagination
	if($totalPages > $pagesToShow) {
		
		// If we\'re currently more than half way through
		if($pagesBefore > $pagesToShow/2) {
			
			// Always show pages 1 and 2 (or whatever the constant end count is), then a separator
			for($i=1; $i<=$constantEndCount; $i++) { $tabArr[] = $i; }
			$tabArr[] = 0;
				
			// If the number of pages after the current page is more than the number of available slots
			if($pagesAfter >= $pagesToShow/2) {
				$empty_slots_before = floor( ($pagesToShow - ($constantEndCount*2 /*there are two ends*/) - 1 /*the current page*/) / 2 /*only half*/) -1  /*the set of dots counts as one slot*/;
			} else {
				$empty_slots_before = $pagesToShow - count($tabArr) - 1 /*current page*/ - $pagesAfter /*How many after*/;
			}
			
			// Insert the tabs	
			for($i=($currentPage-$empty_slots_before); $i<$currentPage; $i++) { $tabArr[] = $i; }	
			
		} else {
			for($i=1; $i<$currentPage; $i++) { $tabArr[] = $i; }
		}
		
		// Insert current page
		$tabArr[] = $currentPage;		
		
		// If we\'re less than half way through
		if($pagesAfter > $pagesToShow/2) {
			
			// How many more slots do we want to show after the current page?
			$empty_slots_after = $pagesToShow - count($tabArr) - $constantEndCount - 1/*the set of dots*/;
			
			// Insert the tabs	
			for($i=($currentPage+1); $i<=$currentPage+$empty_slots_after; $i++) { $tabArr[] = $i; }
			
			// Add a separator
			$tabArr[] = 0;
			
			// Always show pages last 2 pages (or whatever the constant end count is)
			for($i=$totalPages-$constantEndCount+1; $i<=$totalPages; $i++) { $tabArr[] = $i; }

		} else {
			for($i=($currentPage+1); $i<=$totalPages; $i++) { $tabArr[] = $i; }
		}
		
	} else { // No need to split the pagination
		for($i=1;$i<=$totalPages;$i++) { $tabArr[] = $i; }
	}
			
	return $tabArr;
	
	} // end function
} // end if




// ----------------------------------------------------------------------------------------------------------------







// Define some paramaters
$id = isset($id) ? $id.\'_\' : \'\';
$total = isset($total) ? $total : $modx->getPlaceholder($id."total");
$start = isset($start) ? $start : $modx->getPlaceholder($id."start");
$display = isset($display) ? $display : $modx->getPlaceholder($id."perPage");
$currentPage = isset($currentPage) ? $currentPage : $modx->getPlaceholder($id."current");
$landing = isset($tagDocumentID) ? $tagDocumentID : $modx->documentObject[\'id\'];

$pagesToShow = isset($pagesToShow) && is_numeric($pagesToShow) ? $pagesToShow : 15;
$constantEndCount = isset($constantEndCount) && is_numeric($constantEndCount) ? $constantEndCount : 2;


$tplEllipses = isset($tplEllipses) ? $modx->getChunk($tplEllipses) : \'\';
$tplEllipses = !empty($tplEllipses) ? $tplEllipses : \'<span class="splitPagination">...</span>\';

$tplCurrent = isset($tplCurrent) ? $modx->getChunk($tplCurrent) : \'\';
$tplCurrent = !empty($tplCurrent) ? $tplCurrent : \'<span class="ditto_currentpage ditto_page_[+page+][+class+]">[+page+]</span>\';

$tplPageLink = isset($tplPageLink) ? $modx->getChunk($tplPageLink) : \'\';
$tplPageLink = !empty($tplPageLink) ? $tplPageLink : \'<a class="ditto_page ditto_page_[+page+][+class+]" href="[+url+]">[+page+]</a>\';

$firstClass = isset($firstClass) ? $firstClass: \'first\';
$lastClass = isset($lastClass) ? $lastClass: \'last\';


$return = isset($return) ? $return : 0;

// Do nothing if there\'s nothing to do
if ($total == 0 || $display==0) {
	return false;
}

// What page are we on?
$page = ceil($start/$display);

// Generate the pagination
$paginationArray = generatePagination($page, $total, $display, $pagesToShow, $constantEndCount);

// Create empty placeholder for output
$ph = "";

// Build the output
foreach($paginationArray as $page) {
	$inc = ($page-1)*$display;
	
	// First or last classes
	if ($page == 1) { 
			$newClass = \' \' . $firstClass;
	} else if ($page == ceil($total/$display)) {
		$newClass = \' \' . $lastClass;
	} else {
		$newClass = \'\';
	}
	
	// Insert into output
	if($page == 0) {
		$ph .= $tplEllipses; // print an elipse, representing pages that aren\'t displayed
	} else if ($inc==$_GET[$id.\'start\']) {
		$newLink = str_replace(\'[+class+]\', $newClass , $tplCurrent);
		$ph .= str_replace(\'[+page+]\', $page, $newLink);	
	} else {
		$newLink = str_replace(\'[+url+]\', ditto::buildURL("start=".$inc,$landing,$id) , $tplPageLink);		
		$newLink = str_replace(\'[+class+]\', $newClass , $newLink);
		$ph .= str_replace(\'[+page+]\', $page, $newLink);	
	}
}

// Set the placeholder
$modx->setPlaceholder($id."splitPages",$ph);

// Or return the output
if ($return) return $ph;



';
$s['sortBy'] = '
$sortBy = isset($_GET[\'sort\']) ? $_GET[\'sort\'] : \'pagetitle\';
	return $sortBy;
';
$s['getSliderNavigationItem'] = '
	$outerData = \'\';
	if(isset($countElements)):
		$activeItem = isset($activeItem) ? $activeItem : 0;
		for($index = 0; $index < $countElements; $index++):
			$class = $index == $activeItem ? \' class="active"\' : \'\';
			$outerData = $outerData .\'<li data-target="#carousel-example-generic" data-slide-to="\'.$index.\'"\'.$class.\'></li>\';	
		endfor;
	endif;

	return $outerData;
';
$s['colorList'] = '
	if(isset($color)) {
		$colorList = explode(\',\', $color);
		foreach($colorList as $color)
			echo \'<span style="background-color:\'.$color.\'"></span>\';
	}
';
$s['sizeList'] = '
if(isset($size)) {
		$sizeList = explode(\',\', $size);
		foreach($sizeList as $size)
			echo \'<span>\'.trim($size).\'</span>\';
	}
';
$p = &$this->pluginCache;
$p['CodeMirror'] = '$_CM_BASE = \'assets/plugins/codemirror/\';

$_CM_URL = $modx->config[\'site_url\'] . $_CM_BASE;

require(MODX_BASE_PATH. $_CM_BASE .\'codemirror.plugin.php\');

';
$p['CodeMirrorProps'] = '&theme=Theme;list;default,ambiance,blackboard,cobalt,eclipse,elegant,erlang-dark,lesser-dark,midnight,monokai,neat,night,rubyblue,solarized,twilight,vibrant-ink,xq-dark,xq-light; &indentUnit=Indent unit;int;4 &tabSize=The width of a tab character;int;4 &lineWrapping=lineWrapping;list;true,false;true &matchBrackets=matchBrackets;list;true,false;true &activeLine=activeLine;list;true,false;false &emmet=emmet;list;true,false;true &search=search;list;true,false;true ';
$p['FileSource'] = 'require MODX_BASE_PATH.\'assets/plugins/filesource/plugin.filesource.php\';';
$p['Forgot Manager Login'] = 'require MODX_BASE_PATH.\'assets/plugins/forgotmanagerlogin/plugin.forgotmanagerlogin.php\';';
$p['ManagerManager'] = '// You can put your ManagerManager rules EITHER in a chunk OR in an external file - whichever suits your development style the best

// To use an external file, put your rules in /assets/plugins/managermanager/mm_rules.inc.php 
// (you can rename default.mm_rules.inc.php and use it as an example)
// The chunk SHOULD have php opening tags at the beginning and end

// If you want to put your rules in a chunk (so you can edit them through the Manager),
// create the chunk, and enter its name in the configuration tab.
// The chunk should NOT have php tags at the beginning or end.

// See also user-friendly module for editing ManagerManager configuration file ddMMEditor (http://code.divandesign.biz/modx/ddmmeditor).

// ManagerManager requires jQuery 1.9.1, which is located in /assets/plugins/managermanager/js/ folder.

// You don\'t need to change anything else from here onwards
//-------------------------------------------------------

// Run the main code
include($modx->config[\'base_path\'].\'assets/plugins/managermanager/mm.inc.php\');';
$p['ManagerManagerProps'] = '&remove_deprecated_tv_types_pref=Remove deprecated TV types;list;yes,no;yes &config_chunk=Configuration Chunk;text;mm_rules ';
$p['TinyMCE Rich Text Editor'] = 'require MODX_BASE_PATH.\'assets/plugins/tinymce/plugin.tinymce.php\';
';
$p['TinyMCE Rich Text EditorProps'] = '&customparams=Custom Parameters;textarea;valid_elements : "*[*]", &mce_formats=Block Formats;text;p,h1,h2,h3,h4,h5,h6,div,blockquote,code,pre &entity_encoding=Entity Encoding;list;named,numeric,raw;named &entities=Entities;text; &mce_path_options=Path Options;list;Site config,Absolute path,Root relative,URL,No convert;Site config &mce_resizing=Advanced Resizing;list;true,false;true &disabledButtons=Disabled Buttons;text; &link_list=Link List;list;enabled,disabled;enabled &webtheme=Web Theme;list;simple,editor,creative,custom;simple &webPlugins=Web Plugins;text;style,advimage,advlink,searchreplace,contextmenu,paste,fullscreen,xhtmlxtras,media &webButtons1=Web Buttons 1;text;undo,redo,selectall,|,pastetext,pasteword,|,search,replace,|,hr,charmap,|,image,link,unlink,anchor,media,|,cleanup,removeformat,|,fullscreen,code,help &webButtons2=Web Buttons 2;text;bold,italic,underline,strikethrough,sub,sup,|,|,blockquote,bullist,numlist,outdent,indent,|,justifyleft,justifycenter,justifyright,justifyfull,|,styleselect,formatselect,|,styleprops &webButtons3=Web Buttons 3;text; &webButtons4=Web Buttons 4;text; &webAlign=Web Toolbar Alignment;list;ltr,rtl;ltr &width=Width;text;95% &height=Height;text;500 ';
$p['TransAlias'] = 'require MODX_BASE_PATH.\'assets/plugins/transalias/plugin.transalias.php\';';
$p['TransAliasProps'] = '&table_name=Trans table;list;common,russian,dutch,german,czech,utf8,utf8lowercase;russian &char_restrict=Restrict alias to;list;lowercase alphanumeric,alphanumeric,legal characters;legal characters &remove_periods=Remove Periods;list;Yes,No;No &word_separator=Word Separator;list;dash,underscore,none;dash &override_tv=Override TV name;string; ';
$p['customSettings'] = '/**
 * customSettings
 * 
 * Plugin to add your system settings
 *
 * @category    plugin
 * @version     1.0
 * @author      Andchir <andchir@gmaail.com>
 * @internal    @properties &settings=Settings;textarea;Example custom setting~custom_st_example
 * @internal    @events OnSiteSettingsRender
 * @internal    @modx_category
 */

$e = &$modx->Event;
$output = "";

if ($e->name == \'OnSiteSettingsRender\'){

$settingsArr = !empty($settings) ? explode(\'||\',$settings) : array(\'Example custom setting~custom_st_example\');

$output .= \'<table>\';

foreach($settingsArr as $key => $st_row){
    $st_label_arr = explode(\'~\',$st_row);
    $custom_st_label = trim($st_label_arr[0]);
    $custom_st_name = isset($st_label_arr[1]) ? $st_label_arr[1] : \'custom_st\';
    $custom_st_value = isset($st_label_arr[1]) && isset($modx->config[$st_label_arr[1]]) ? trim($modx->config[$st_label_arr[1]]) : \'\';
    $output .= \'
      <tr>
        <td nowrap="nowrap" class="warning" width="200">\'.$custom_st_label.\'</td>
        <td><input type="text" value="\'.$custom_st_value.\'" name="\'.$custom_st_name.\'" style="width: 350px;" onchange="documentDirty=true;" /></td>
      </tr>
    \';
}

$output .= \'</table>\';

}

$e->output($output);';
$p['customSettingsProps'] = '&settings=Settings;textarea;Номер телефона~company_phone||Адрес компании~company_address||Менеджер по персоналу~hr_manager ';
$p['TVimageResizer'] = 'require MODX_BASE_PATH.\'assets/plugins/tvimageresizer/TVimageResizer.inc.php\';';
$p['TVimageResizerProps'] = '&tv_ids=TV IDs;string; &dirs=Thumb folders;string;medium~mini &width=Width;string;250~100 &height=Height;string;408~100 &rcorner=Corners percentage of clipping;string; &backgroundColor=Background color;string;#FFFFFF &watermark=Watermark image path (png);string; &watermarkPos=Watermark position;string;90% 90% &cprighttext=Copyright text;string; &quality=Quality;int;90 &mirror=Mirror effect;list;yes,no;no &crop=Cropping;list;yes,no,crop_resized,fill_resized;crop_resized &save_o_name=Save only name;list;yes,no;no &rename_images=Rename images;list;yes,no;no &refresh_all_images=Refresh all images;list;yes,no;no ';
$e = &$this->pluginEvent;
$e['OnBeforeDocFormSave'] = array('ManagerManager','TVimageResizer');
$e['OnBeforeManagerLogin'] = array('Forgot Manager Login');
$e['OnBeforePluginFormSave'] = array('FileSource');
$e['OnBeforeSnipFormSave'] = array('FileSource');
$e['OnChunkFormRender'] = array('CodeMirror');
$e['OnDocDuplicate'] = array('ManagerManager');
$e['OnDocFormPrerender'] = array('ManagerManager');
$e['OnDocFormRender'] = array('CodeMirror','ManagerManager');
$e['OnDocFormSave'] = array('ManagerManager');
$e['OnInterfaceSettingsRender'] = array('TinyMCE Rich Text Editor');
$e['OnManagerAuthentication'] = array('Forgot Manager Login');
$e['OnManagerLoginFormRender'] = array('Forgot Manager Login');
$e['OnModFormRender'] = array('CodeMirror');
$e['OnPluginFormPrerender'] = array('FileSource');
$e['OnPluginFormRender'] = array('ManagerManager','CodeMirror','FileSource');
$e['OnRichTextEditorRegister'] = array('TinyMCE Rich Text Editor');
$e['OnRichTextEditorInit'] = array('TinyMCE Rich Text Editor');
$e['OnSiteRefresh'] = array('TVimageResizer');
$e['OnSiteSettingsRender'] = array('customSettings');
$e['OnSnipFormPrerender'] = array('FileSource');
$e['OnSnipFormRender'] = array('FileSource','CodeMirror');
$e['OnStripAlias'] = array('TransAlias');
$e['OnTempFormRender'] = array('CodeMirror');
$e['OnTVFormRender'] = array('ManagerManager');

